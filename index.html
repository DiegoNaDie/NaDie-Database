<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela de Precificação para Confeitaria</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<main class="container">
    <header>
        <nav class="tabs">
            <button id="tab-btn-ingredientes" class="tab-button active" onclick="openTab(event, 'ingredientes')">Ingredientes</button>
            <button id="tab-btn-receitas" class="tab-button" onclick="openTab(event, 'receitas')">Nova Receita</button>
            <button id="tab-btn-receitas-salvas" class="tab-button" onclick="openTab(event, 'receitas-salvas')">Receitas Salvas</button>
        </nav>
    </header>

    <section id="ingredientes" class="tab-content active">
        <header class="section-header">
            <h2>Cadastro de Ingredientes</h2>
            <button class="btn-secondary" onclick="sortIngredients()">Ordenar A-Z</button>
        </header>
        <form id="ingredient-form">
            <input type="hidden" id="ingredient-id">
            <input type="text" id="ingredient-name" placeholder="Nome do Ingrediente" required>
            <input type="number" id="ingredient-price" placeholder="Preço do Pacote/Unidade (R$)" step="0.01" required>
            <input type="number" id="ingredient-quantity" placeholder="Quantidade na Embalagem" step="0.01" required>
            <select id="ingredient-unit">
                <option value="g">Gramas (g)</option>
                <option value="kg">Quilogramas (kg)</option>
                <option value="ml">Mililitros (ml)</option>
                <option value="l">Litros (l)</option>
                <option value="un">Unidade(s)</option>
            </select>
            <button type="submit" id="ingredient-submit-btn">Adicionar Ingrediente</button>
        </form>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Ingrediente</th>
                        <th>Custo</th>
                        <th class="actions-cell">Ações</th>
                    </tr>
                </thead>
                <tbody id="ingredients-table-body"></tbody>
            </table>
        </div>
    </section>

    <section id="receitas" class="tab-content">
        <h2 id="recipe-form-title">Nova Receita</h2>
        <form id="recipe-form">
            <input type="hidden" id="recipe-id">
            <input type="text" id="recipe-name" placeholder="Nome da Receita" required>
            <div id="recipe-ingredients"></div>
            <button type="button" onclick="addRecipeIngredientField()">+ Adicionar Ingrediente</button>
            <hr>
            <h3>Definição de Preço</h3>
            <input type="number" id="recipe-yield" placeholder="Rendimento (ex: 20 unidades)" min="1">
            <input type="number" id="profit-margin" placeholder="Lucro Desejado (%)">
            <input type="number" id="additional-tax" placeholder="Custos Adicionais (gás, luz, etc %)">
            <input type="number" id="per-order-fee-percentage" placeholder="Taxa por Pedido (app, cartão %)">
            <button type="button" class="btn-secondary" onclick="calculateAndDisplayCurrentRecipe()">Calcular Preço</button>
            <button type="submit" id="recipe-submit-btn">Salvar Receita</button>
        </form>
        <div class="result-box" id="recipe-cost-result"></div>
    </section>

    <section id="receitas-salvas" class="tab-content">
        <h2>Suas Receitas Salvas</h2>
        <div id="saved-recipes-container"><p>Nenhuma receita salva ainda.</p></div>
        
        <footer class="backup-controls">
            <h3>Backup e Restauração</h3>
            <div>
                <button type="button" class="btn-secondary" onclick="exportBackup()">Exportar</button>
                <button type="button" class="btn-success" onclick="document.getElementById('import-input').click()">Importar</button>
                <input type="file" id="import-input" accept=".json" onchange="importBackup(event)">
            </div>
        </footer>
    </section>
</main>

<script src="script.js"></script>

</body>
</html>
